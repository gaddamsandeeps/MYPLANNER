<!DOCTYPE html>
<html ng-app="resourceTracking">
	<head>
		<title>Admin</title>
		<meta charset="utf-8">
		<meta http-equiv="X-UA-Compatible" content="IE=edge">
		<meta name="viewport" content="width=device-width, initial-scale=1">
		<link href="lib/bootstrap.css" rel="stylesheet">
		<link href="css/validation.css" rel="stylesheet">
		<style>
		h3{margin: 0!important;}
		</style>
	</head>
	<body>
		<% var pageName = 'admin' %>
		<%include header.html%>
		<div class="container">
			<div id="Teams" ng-controller="TeamCtrl">
				<div class="row">
					<div class="col-md-1"><h3>Teams</h3></div>
					<div class="col-md-1"><button type="button" class="btn btn-primary btn-xs" ng-click="addTeam()">Add</button></div>
				</div>
				<table class="table table-striped">
					<thead>
						<tr>
							<th>Id</th>
							<th>Name</th>
							<th>Description</th>
							<th>Lead</th>
							<th></th>
							<th></th>
						</tr>
					</thead>
					<tbody>
						<tr ng-repeat="t in Teams">
							<td>{{t.id}}</td>
							<td>{{t.name}}</td>
							<td>{{t.description}}</td>
							<td>{{t.username}}</td>
							<td><img alt="Edit" src="images/edit.png" ng-click="editTeam(t.id)"></td>
							<td><img alt="Delete" src="images/delete.png" ng-click="removeTeam(t.id)"></td>
						</tr>
					</tbody>
				</table>
				<!-- AddTeamModal -->
				<div class="modal fade" id="AddTeamModal" tabindex="-1" role="dialog" aria-hidden="true">
					<div class="modal-dialog">
						<div class="modal-content">
							<form name="AddTeamForm" novalidate class="form-horizontal">
								<div class="modal-header">
									<button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
									<h4>{{mode}} Team</h4>
								</div>
								<div class="modal-body">
									<div class="form-group" show-errors>
										<label for="teamname" class="col-md-3 control-label">Team</label>
										<div class="col-md-9">
											<input type="text" id="teamname" name="teamname" ng-model="team.name" class="form-control" placeholder="Team Name" required>
											<span class="error-message" ng-show="AddTeamForm.teamname.$error.required">Team Name is required</span>
										</div>
									</div>
									<div class="form-group">
										<label for="teamdescription" class="col-md-3 control-label">Description</label>
										<div class="col-md-9">
											<textarea class="form-control" rows="3" ng-model="team.description" placeholder="Description" id="teamdescription" name="teamdescription"></textarea>
										</div>
									</div>
									<div class="form-group" show-errors>
										<label for="teamlead" class="col-md-3 control-label">Lead</label>
										<div class="col-md-9">
											<select ng-model="team.leadid" ng-options="opt as opt.username for opt in Leads" id="teamlead" name="teamlead" class="form-control" required>
												<option value="">Choose Lead</option>
											</select>
											<span class="error-message" ng-show="AddTeamForm.teamlead.$dirty && AddTeamForm.teamlead.$invalid">Select Lead</span>
										</div>
									</div>
								</div>
								<div class="modal-footer">
									<button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
									<button type="reset" class="btn btn-default" ng-click="reset()">Reset</button>
									<button type="submit" class="btn btn-primary" ng-click="saveTeam()">Save</button>
								</div>
							</form>
						</div>
					</div>
				</div>				
			</div>
			<div id="Roles" ng-controller="RoleCtrl">
				<div class="row">
					<div class="col-md-1"><h3>Roles</h3></div>
					<div class="col-md-1"><button type="button" class="btn btn-primary btn-xs" ng-click="addRole()">Add</button></div>
				</div>
				<table class="table table-striped">
					<thead>
						<tr>
							<th>Id</th>
							<th>Name</th>
							<th>Description</th>
							<th></th>
						</tr>
					</thead>
					<tbody>
						<tr ng-repeat="r in Roles">
							<td>{{r.id}}</td>
							<td>{{r.name}}</td>
							<td>{{r.description}}</td>
							<td><img alt="Edit" src="images/edit.png" ng-click="editRole(r.id)"></td>
							<td><img alt="Delete" src="images/delete.png" ng-click="removeRole(r.id)"></td>
						</tr>
					</tbody>
				</table>
				<!-- AddRoleModal -->
				<div class="modal fade" id="AddRoleModal" tabindex="-1" role="dialog" aria-hidden="true">
					<div class="modal-dialog">
						<div class="modal-content">
							<form name="AddRoleForm" novalidate class="form-horizontal">
								<div class="modal-header">
									<button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
									<h4>{{mode}} Role</h4>
								</div>
								<div class="modal-body">
									<div class="form-group" show-errors>
										<label for="rolename" class="col-md-3 control-label">Role</label>
										<div class="col-md-9">
											<input type="text" id="rolename" name="rolename" ng-model="role.name" class="form-control" placeholder="Role Name" required>
											<span class="error-message" ng-show="AddRoleForm.rolename.$error.required">Role is required</span>
										</div>
									</div>
									<div class="form-group">
										<label for="roledescription" class="col-md-3 control-label">Description</label>
										<div class="col-md-9">
											<textarea class="form-control" rows="3" ng-model="role.description" placeholder="Description" id="roledescription" name="roledescription"></textarea>
										</div>
									</div>
								</div>
								<div class="modal-footer">
									<button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
									<button type="reset" class="btn btn-default" ng-click="reset()">Reset</button>
									<button type="submit" class="btn btn-primary" ng-click="saveRole()">Save</button>
								</div>
							</form>
						</div>
					</div>
				</div>								
			</div>
		</div>				
		<script src="lib/jquery.js"></script>
		<script src="lib/bootstrap.js"></script>
		<script src="lib/angular.js"></script>
		<script src="js/common/directives.js"></script>
		<script src="js/admin.js"></script>
	</body>
</html>